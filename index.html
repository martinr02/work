<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ö–ü–ò ‚Äî –ú–∏—Ä–æ–≤–æ–µ –°–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–µ –ò–ò</title>
  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #007bff;
      --accent: #00c851;
      --secondary: #ffdd57;
      --bg-light: #f5f5f5;
      --bg-white: #ffffff;
      --danger: #dc3545;
      --font-main: 'Roboto', sans-serif;
    }
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: var(--font-main);
      background: var(--bg-light);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 20px;
    }
    .container {
      background: var(--bg-white);
      border-radius: 15px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.1);
      max-width: 900px;
      width: 100%;
      padding: 30px;
      animation: fadeIn 0.7s ease-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    header {
      text-align: center;
      margin-bottom: 30px;
    }
    header h1 {
      color: var(--primary);
      font-size: 2.5rem;
      margin-bottom: 10px;
    }
    header p {
      font-size: 1rem;
      color: var(--primary);
    }
    main {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
    }
    .section, .kpi-item {
      background: #e3f2fd;
      padding: 20px;
      border-radius: 10px;
      position: relative;
      overflow: hidden;
      transition: transform 0.3s;
    }
    .section:hover, .kpi-item:hover {
      transform: translateY(-5px);
    }
    .section h3, .kpi-item h3 {
      font-weight: 500;
      margin-bottom: 15px;
      color: var(--primary);
    }
    .input-group {
      margin-bottom: 10px;
    }
    input {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 1rem;
      transition: border-color 0.3s;
    }
    input:focus {
      border-color: var(--primary);
      outline: none;
    }
    .progress-bar {
      height: 20px;
      background: #eee;
      border-radius: 10px;
      overflow: hidden;
      margin-top: 10px;
    }
    .progress-fill {
      height: 100%;
      width: 0;
      background: linear-gradient(90deg, #ff4444, var(--accent));
      border-radius: 10px;
      transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .warning {
      color: var(--danger);
      font-size: 0.9rem;
      margin-top: 5px;
      display: none;
    }
    .result-box {
      grid-column: 1 / -1;
      background: var(--primary);
      color: var(--bg-white);
      padding: 25px;
      border-radius: 10px;
      text-align: center;
      animation: slideUp 0.7s ease-out;
    }
    @keyframes slideUp {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    .result-item {
      margin-bottom: 15px;
    }
    .total-before-tax {
      font-size: 1.5rem;
      color: #cce5ff;
    }
    .total-after-tax {
      font-size: 2rem;
      font-weight: bold;
      color: var(--secondary);
      background: rgba(0, 0, 0, 0.2);
      padding: 10px 15px;
      border-radius: 8px;
      display: inline-block;
    }
    .total-after-tax::before {
      content: "üíµ ";
    }
    .hours-coefficient, .kpi-percentage {
      font-size: 1rem;
      margin-top: 10px;
      color: #f8f9fa;
    }
    @media (max-width: 600px) {
      main {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ö–ü–ò</h1>
      <p>–ú–∏—Ä–æ–≤–æ–µ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–µ –ò–ò: –ø–æ–±–µ–¥–∞ –∑–∞ ChatGPT!</p>
    </header>
    <main>
      <!-- –£—á–µ—Ç –æ—Ç—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —á–∞—Å–æ–≤ -->
      <section class="section" id="hours-section">
        <h3>–û—Ç—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —á–∞—Å—ã</h3>
        <div class="input-group">
          <input type="number" id="hours" placeholder="–ß–∞—Å—ã –∑–∞ –º–µ—Å—è—Ü" min="0" max="744">
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="hours-progress"></div>
        </div>
        <div class="warning" id="hours-warning">–ú–∏–Ω–∏–º—É–º 176 —á–∞—Å–æ–≤</div>
      </section>
      <!-- KPI —ç–ª–µ–º–µ–Ω—Ç—ã -->
      <section class="kpi-item">
        <h3>Schedule Adherence (87-93%)</h3>
        <div class="input-group">
          <input type="text" id="sa" placeholder="–ó–Ω–∞—á–µ–Ω–∏–µ (%)">
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="sa-progress"></div>
        </div>
      </section>
      <section class="kpi-item">
        <h3>–ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ (80-95)</h3>
        <div class="input-group">
          <input type="text" id="qc" placeholder="–ó–Ω–∞—á–µ–Ω–∏–µ">
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="qc-progress"></div>
        </div>
      </section>
      <section class="kpi-item">
        <h3>–ü—Ä–æ–¥–∞–∂–∏ –Ω–∞ –≤—Ö–æ–¥—è—â–∏—Ö (67-85%)</h3>
        <div class="input-group">
          <input type="text" id="sales" placeholder="–ó–Ω–∞—á–µ–Ω–∏–µ (%)">
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="sales-progress"></div>
        </div>
      </section>
      <section class="kpi-item">
        <h3>Repeated Calls (23-26%)</h3>
        <div class="input-group">
          <input type="text" id="rc" placeholder="–ó–Ω–∞—á–µ–Ω–∏–µ (%)">
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="rc-progress"></div>
        </div>
      </section>
      <section class="kpi-item">
        <h3>–ò—Ç–æ–≥–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (9-10)</h3>
        <div class="input-group">
          <input type="text" id="test" placeholder="–ó–Ω–∞—á–µ–Ω–∏–µ">
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="test-progress"></div>
        </div>
      </section>
      <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
      <section class="result-box">
        <div class="result-item">
          <h4>–ö–ü–ò –¥–æ –Ω–∞–ª–æ–≥–∞:</h4>
          <div class="total-before-tax" id="total-before-tax">0 —Å—É–º</div>
        </div>
        <div class="result-item">
          <h4>–ö–ü–ò –ø–æ—Å–ª–µ –Ω–∞–ª–æ–≥–∞ (7.5%):</h4>
          <div class="total-after-tax" id="total-after-tax">0 —Å—É–º</div>
        </div>
        <div class="hours-coefficient" id="hours-coefficient"></div>
        <div class="kpi-percentage" id="kpi-percentage"></div>
      </section>
    </main>
  </div>
  <script>
    'use strict';
    const BASE_KPI = 1995000;
    // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –≤ —á–∏—Å–ª–æ (–∑–∞–º–µ–Ω–∞ –∑–∞–ø—è—Ç–æ–π –Ω–∞ —Ç–æ—á–∫—É)
    const parseNumber = (value) => {
      if (!value) return 0;
      return parseFloat(value.replace(',', '.')) || 0;
    };
    const calculateKPI = () => {
      const workedHours = parseNumber(document.getElementById('hours').value);
      const hoursCoefficient = Math.min(workedHours / 176, 1);
      const sa = parseNumber(document.getElementById('sa').value);
      const qc = parseNumber(document.getElementById('qc').value);
      const sales = parseNumber(document.getElementById('sales').value);
      const rc = parseNumber(document.getElementById('rc').value);
      const test = parseNumber(document.getElementById('test').value);
      const saScore = calculateScore(sa, 87, 93, 25, true);
      const qcScore = calculateScore(qc, 80, 95, 25, true);
      const salesScore = calculateScore(sales, 67, 85, 25, true);
      const rcScore = calculateScore(rc, 23, 26, 15, false);
      const testScore = calculateScore(test, 9, 10, 10, true);
      const totalScore = saScore + qcScore + salesScore + rcScore + testScore;
      const totalBeforeTax = (totalScore / 100 * BASE_KPI) * hoursCoefficient;
      const tax = totalBeforeTax * 0.075;
      const totalAfterTax = totalBeforeTax - tax;
      const kpiPercentage = totalScore;
      
      updateProgress('hours-progress', workedHours, 176);
      updateProgress('sa-progress', sa, 93);
      updateProgress('qc-progress', qc, 95);
      updateProgress('sales-progress', sales, 85);
      updateProgress('rc-progress', rc, 26, true);
      updateProgress('test-progress', test, 10);
      
      document.getElementById('total-before-tax').textContent = `${totalBeforeTax.toLocaleString('ru-RU')} —Å—É–º`;
      document.getElementById('total-after-tax').textContent = `${totalAfterTax.toLocaleString('ru-RU')} —Å—É–º`;
      document.getElementById('hours-coefficient').textContent = `–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —á–∞—Å–æ–≤: ${(hoursCoefficient * 100).toFixed(1)}%`;
      document.getElementById('kpi-percentage').textContent = `–ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –æ–±—â–µ–≥–æ –ö–ü–ò: ${kpiPercentage.toFixed(2)}%`;
      
      document.getElementById('hours-warning').style.display = workedHours < 176 ? 'block' : 'none';
    };
    function calculateScore(value, min, max, weight, isMoreBetter) {
      if (isMoreBetter) {
        if (value >= max) return weight;
        if (value <= min) return 0;
        return ((value - min) / (max - min)) * weight;
      } else {
        if (value <= max) return weight;
        if (value >= min) return 0;
        return ((min - value) / (min - max)) * weight;
      }
    }
    const updateProgress = (id, value, maxValue, reverse = false) => {
      const progressFill = document.getElementById(id);
      let percentage = (value / maxValue) * 100;
      percentage = Math.min(100, Math.max(0, percentage));
      if (reverse) percentage = 100 - percentage;
      progressFill.style.width = `${percentage}%`;
    };
    // –§—É–Ω–∫—Ü–∏—è –¥–µ–±–∞—É–Ω—Å–∏–Ω–≥–∞ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ—Å—á—ë—Ç–∞
    const debounce = (func, delay) => {
      let timeout;
      return (...args) => {
        clearTimeout(timeout);
        timeout = setTimeout(() => func(...args), delay);
      };
    };
    const debouncedCalculate = debounce(calculateKPI, 300);
    document.querySelectorAll('input').forEach(input => {
      input.addEventListener('input', debouncedCalculate);
    });
    window.addEventListener('load', calculateKPI);
  </script>
</body>
</html>
