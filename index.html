<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ö–ü–ò - –ö–æ–ª–ª-—Ü–µ–Ω—Ç—Ä</title>
  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #007bff;
      --accent: #00C851;
      --secondary: #ffdd57;
      --bg-light: #f5f5f5;
      --bg-white: #ffffff;
      --danger: #dc3545;
      --text-primary: #333333;
      --text-muted: #6c757d;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: 'Roboto', sans-serif;
      background: var(--bg-light);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .container {
      background: var(--bg-white);
      max-width: 800px;
      width: 90%;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.1);
      animation: fadeIn 0.5s ease-in-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    h2 {
      text-align: center;
      margin-bottom: 20px;
      color: var(--primary);
    }

    .section {
      margin-bottom: 25px;
      padding: 20px;
      border-radius: 10px;
      background: #e3f2fd;
      position: relative;
      overflow: hidden;
    }

    .section h3 {
      margin-top: 0;
      font-weight: 500;
      color: var(--primary);
    }

    .section input {
      display: block;
      width: 100%;
      max-width: 250px;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 16px;
      transition: border-color 0.3s;
    }

    .section input:focus {
      border-color: var(--primary);
      outline: none;
    }

    .kpi-item {
      margin-bottom: 20px;
      padding: 20px;
      border-left: 5px solid var(--primary);
      background: #f8f9fa;
      border-radius: 8px;
      position: relative;
      overflow: hidden;
    }

    .kpi-item h3 {
      margin-top: 0;
      font-weight: 500;
    }

    .progress-bar {
      height: 20px;
      background: #eee;
      border-radius: 10px;
      margin-top: 10px;
      position: relative;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      width: 0;
      border-radius: 10px;
      background: linear-gradient(90deg, #ff4444, var(--accent));
      transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .warning {
      color: var(--danger);
      font-size: 14px;
      margin-top: 5px;
      display: none;
    }

    .result-box {
      background: var(--primary);
      color: var(--bg-white);
      padding: 25px;
      border-radius: 10px;
      text-align: center;
      animation: slideUp 0.5s ease-out;
    }

    @keyframes slideUp {
      from { transform: translateY(10px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .result-box .result-item {
      margin-bottom: 20px;
    }

    .total-before-tax {
      font-size: 22px;
      color: #cce5ff;
    }

    .total-after-tax {
      font-size: 32px;
      font-weight: bold;
      color: var(--secondary);
      background: rgba(0, 0, 0, 0.2);
      padding: 10px 15px;
      border-radius: 8px;
      display: inline-block;
    }

    .total-after-tax::before {
      content: "üíµ ";
    }

    .hours-coefficient, .kpi-percentage {
      font-size: 16px;
      margin-top: 10px;
      color: #f8f9fa;
    }

    @media (max-width: 480px) {
      .container {
        padding: 20px;
      }
      .section, .kpi-item {
        padding: 15px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ö–ü–ò</h2>
    
    <!-- –£—á–µ—Ç –æ—Ç—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —á–∞—Å–æ–≤ -->
    <div class="section" id="hours-section">
      <h3>–£—á–µ—Ç –æ—Ç—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —á–∞—Å–æ–≤</h3>
      <input type="number" id="hours" placeholder="–û—Ç—Ä–∞–±–æ—Ç–∞–Ω–æ —á–∞—Å–æ–≤ –≤ –º–µ—Å—è—Ü–µ" min="0" max="744">
      <div class="progress-bar">
        <div class="progress-fill" id="hours-progress"></div>
      </div>
      <div class="warning" id="hours-warning">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–æ—Ä–º–∞: 176 —á–∞—Å–æ–≤</div>
    </div>

    <!-- KPI —ç–ª–µ–º–µ–Ω—Ç—ã -->
    <div class="kpi-item">
      <h3>Schedule Adherence (87-93%)</h3>
      <input type="text" id="sa" placeholder="–§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (%)">
      <div class="progress-bar">
        <div class="progress-fill" id="sa-progress"></div>
      </div>
    </div>

    <div class="kpi-item">
      <h3>–ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ (80-95)</h3>
      <input type="text" id="qc" placeholder="–§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ">
      <div class="progress-bar">
        <div class="progress-fill" id="qc-progress"></div>
      </div>
    </div>

    <div class="kpi-item">
      <h3>–ü—Ä–æ–¥–∞–∂–∏ –Ω–∞ –≤—Ö–æ–¥—è—â–∏—Ö (67-85%)</h3>
      <input type="text" id="sales" placeholder="–§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (%)">
      <div class="progress-bar">
        <div class="progress-fill" id="sales-progress"></div>
      </div>
    </div>

    <div class="kpi-item">
      <h3>Repeated Calls (23-26%)</h3>
      <input type="text" id="rc" placeholder="–§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (%)">
      <div class="progress-bar">
        <div class="progress-fill" id="rc-progress"></div>
      </div>
    </div>

    <div class="kpi-item">
      <h3>–ò—Ç–æ–≥–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (9-10)</h3>
      <input type="text" id="test" placeholder="–§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ">
      <div class="progress-bar">
        <div class="progress-fill" id="test-progress"></div>
      </div>
    </div>

    <div class="result-box">
      <div class="result-item">
        <h4>–°—É–º–º–∞ –ö–ü–ò –¥–æ –Ω–∞–ª–æ–≥–∞:</h4>
        <div class="total-before-tax" id="total-before-tax">0 —Å—É–º</div>
      </div>
      <div class="result-item">
        <h4>–°—É–º–º–∞ –ö–ü–ò –ø–æ—Å–ª–µ –Ω–∞–ª–æ–≥–∞ (7.5%):</h4>
        <div class="total-after-tax" id="total-after-tax">0 —Å—É–º</div>
      </div>
      <div class="hours-coefficient" id="hours-coefficient"></div>
      <div class="kpi-percentage" id="kpi-percentage"></div>
    </div>
  </div>

  <script>
    const BASE_KPI = 1995000; // –ë–∞–∑–æ–≤–∞—è —Å—É–º–º–∞

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–∏—Å–µ–ª (–∑–∞–º–µ–Ω–∞ –∑–∞–ø—è—Ç–æ–π –Ω–∞ —Ç–æ—á–∫—É)
    function parseNumber(value) {
      if (!value) return 0;
      return parseFloat(value.replace(',', '.')) || 0;
    }

    function calculateKPI() {
      // –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —á–∞—Å–æ–≤
      const workedHours = parseNumber(document.getElementById('hours').value);
      const hoursCoefficient = Math.min(workedHours / 176, 1);

      // –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –ö–ü–ò
      const sa = parseNumber(document.getElementById('sa').value);
      const qc = parseNumber(document.getElementById('qc').value);
      const sales = parseNumber(document.getElementById('sales').value);
      const rc = parseNumber(document.getElementById('rc').value);
      const test = parseNumber(document.getElementById('test').value);

      // –†–∞—Å—á–µ—Ç –±–∞–ª–ª–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ö–ü–ò
      const saScore = calculateScore(sa, 87, 93, 25, true);
      const qcScore = calculateScore(qc, 80, 95, 25, true);
      const salesScore = calculateScore(sales, 67, 85, 25, true);
      const rcScore = calculateScore(rc, 23, 26, 15, false); // –ß–µ–º –º–µ–Ω—å—à–µ ‚Äì —Ç–µ–º –ª—É—á—à–µ
      const testScore = calculateScore(test, 9, 10, 10, true);

      // –û–±—â–∏–π —Ä–∞—Å—á–µ—Ç
      const totalScore = saScore + qcScore + salesScore + rcScore + testScore;
      const totalBeforeTax = (totalScore / 100 * BASE_KPI) * hoursCoefficient;
      const tax = totalBeforeTax * 0.075;
      const totalAfterTax = totalBeforeTax - tax;

      // –ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –ö–ü–ò
      const kpiPercentage = totalScore;

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–≤
      updateProgress('hours-progress', workedHours, 176);
      updateProgress('sa-progress', sa, 93);
      updateProgress('qc-progress', qc, 95);
      updateProgress('sales-progress', sales, 85);
      updateProgress('rc-progress', rc, 26, true);
      updateProgress('test-progress', test, 10);

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
      document.getElementById('total-before-tax').textContent = `${totalBeforeTax.toLocaleString('ru-RU')} —Å—É–º`;
      document.getElementById('total-after-tax').textContent = `${totalAfterTax.toLocaleString('ru-RU')} —Å—É–º`;
      document.getElementById('hours-coefficient').textContent = `–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —á–∞—Å–æ–≤: ${(hoursCoefficient * 100).toFixed(1)}%`;
      document.getElementById('kpi-percentage').textContent = `–ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –æ–±—â–µ–≥–æ –ö–ü–ò: ${kpiPercentage.toFixed(2)}%`;

      // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è, –µ—Å–ª–∏ —á–∞—Å—ã –Ω–∏–∂–µ –Ω–æ—Ä–º—ã
      document.getElementById('hours-warning').style.display = workedHours < 176 ? 'block' : 'none';
    }

    function calculateScore(value, min, max, weight, isMoreBetter) {
      if (isMoreBetter) {
        if (value >= max) return weight;
        if (value <= min) return 0;
        return ((value - min) / (max - min)) * weight;
      } else {
        if (value <= max) return weight;
        if (value >= min) return 0;
        return ((min - value) / (min - max)) * weight;
      }
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ —Å –ø–ª–∞–≤–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–µ–π
    function updateProgress(id, value, maxValue, reverse = false) {
      const progressFill = document.getElementById(id);
      let percentage = (value / maxValue) * 100;
      percentage = Math.min(100, Math.max(0, percentage));
      if (reverse) percentage = 100 - percentage;
      progressFill.style.width = `${percentage}%`;
    }

    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Å—á–µ—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
    document.querySelectorAll('input').forEach(input => {
      input.addEventListener('input', calculateKPI);
    });

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    window.onload = calculateKPI;
  </script>
</body>
</html>
